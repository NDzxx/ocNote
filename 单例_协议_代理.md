# 单例,协议和代理

##单例模式
实现单例模式有三个条件

1、类的构造方法是私有的

2、类提供一个类方法用于产生对象

3、类中有一个私有的自己对象


针对于这三个条件，OC中都是可以做到的

1、类的构造方法是私有的

我们只需要重写allocWithZone方法，让初始化操作只执行一次

2、类提供一个类方法产生对象

这个可以直接定义一个类方法

3、类中有一个私有的自己对象

我们可以在.m文件中定义一个属性即可  

AdressBook.h

```
//
//  AdressBook.h
//  35_Singleton
//
//  Created by jiangwei on 14-10-13.
//  Copyright (c) 2014年 jiangwei. All rights reserved.
//

#import <Foundation/Foundation.h>

//设计单利类的目的，限制这个类只能创建一个对象

//构造方法为私有的
//保存一个全局的static变量
@interface AdressBook : NSObject

+ (AdressBook *)shareInstance;

@end
```
AdressBook.m
```
//
//  AdressBook.m
//  35_Singleton
//
//  Created by jiangwei on 14-10-13.
//  Copyright (c) 2014年 jiangwei. All rights reserved.
//

#import "AdressBook.h"

static AdressBook *instance = nil;//不能让外部访问，同时放在静态块中的

@implementation AdressBook

+ (AdressBook *)shareInstance{
    if(instance == nil){
        instance = [[AdressBook alloc] init];
    }
    return instance;
}

//限制方法，类只能初始化一次
//alloc的时候调用
+ (id) allocWithZone:(struct _NSZone *)zone{
    if(instance == nil){
        instance = [super allocWithZone:zone];
    }
    return instance;
}

//拷贝方法
- (id)copyWithZone:(NSZone *)zone{
    return instance;
}

//需要重写release方法，不能让其引用+1
- (id)retain{
    return self;
}

//需要重写release方法，不能让其引用-1
- (oneway void)release{
    //do Nothing...
}

- (id)autorelease{
    return self;
}

@end

```